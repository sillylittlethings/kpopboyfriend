storylines = {
    "Jungkook (BTS)": `Hey there kitten
Meow daddy
    Such a good kitty
    Prrrr~
        That's my girl. Want a treat?
        Yes, Daddy!
            Good. Now come here.
        Maybe... what kind of treat?
            Only the best for my kitten.
    I'm not a real cat, you know.
        Oh, I know. But you're my kitten.
Who are you calling kitten?
    The one purring like that.
    Shut up!
        Heh, you're cute when you're shy.
    I'm not your kitten.
        You will be soon.
Is this Jungkook from BTS?
    It sure is, kitty.
    No way. Prove it.
        Should I sing you a lullaby?
        OMG, yes, please!
            *sings softly* Sweet dreams, kitten.
        Wait, what if you're lying?
            Then I guess you'll have to find out.
    I don't believe you.
        Your loss, kitten.
    Fine, maybe you are...
        There we go.`,
    "Taehyung (V from BTS)": `Hey there, stranger
Hi? Who is this?
    You can call me Taehyung.
    Taehyung... from BTS?
        The one and only.
        OMG, why are you messaging me?!
            Just wanted to say hi.
            Hi...
    You're lying.
        Okay, donâ€™t believe me. Your loss.
        Fine, maybe you are.
            Now weâ€™re getting somewhere.`,
    "Lisa (BLACKPINK)": `Guess who?
Uhâ€¦ who is this?
    Itâ€™s Lisa!
    Lisa? From BLACKPINK?
        Ding ding ding!
        Why would Lisa text me?
            Because Iâ€™m bored. Whatâ€™s up?
            Uhâ€¦ nothing much?
    I donâ€™t believe you.
        Aww, come on! Want me to prove it?
        Sure.
            Letâ€™s FaceTime then!
            OMG, really?!
                Nah, Iâ€™m kidding.`,
    "Jisoo (BLACKPINK)": `Hello! ðŸ˜Š
Hi?
    Itâ€™s Jisoo!
    Jisoo... from BLACKPINK?!
        Yes! How did you know?
        Because no one else texts like this!
    I donâ€™t think so.
        Okay, what if I send a selfie?
        Wait, really?!
            Hold on... ðŸ“¸`,
    "Yeonjun (TXT)":`Hey, do you play games?
Sometimes, why?
    Because I need someone to beat me in Overwatch.
    Wait... are you Yeonjun?
        Yep, and you better be good.
        OMG, Iâ€™m terrible!
            Guess Iâ€™ll carry, then.
    Haha, no way.
        Want to find out? Add me.
        Okay, fine!`,
    "Suga (BTS)": `Hey, whatâ€™s up?
Whoâ€™s this?
    Yoongi.
    Yoongi... as in Suga from BTS?
        Thatâ€™s the one.
        No way. Why are you texting me?
            Because youâ€™re interesting.
            Me? Interesting?
                Donâ€™t let it go to your head.
    Nice try, faker.
        Heh, suit yourself.
        Fine, but if youâ€™re really Suga, prove it.
            How about I drop a hint?
            Sure.
                Whatâ€™s my favorite color?
                Easy. Mint.`,
    "IU": `Hi there!
Uh, hi?
    Itâ€™s IU. ðŸ˜Š
    Wait, the IU?!
        Yep, thatâ€™s me.
        No way. Why would you message me?
            Because I wanted to. Is that a problem?
            Uh, no!
    Sure, and Iâ€™m BeyoncÃ©.
        Haha, youâ€™re funny.
        But seriously, itâ€™s me.
    Prove it.
        Hmm... how about I sing something for you?
        Wait, really?!
            Hold on... ðŸŽµ`,
    "Hoshi (SEVENTEEN)": `Hey, do you like tigers?
Uhâ€¦ I guess?
    Good answer. Iâ€™m Hoshi.
    Hoshi? From SEVENTEEN?
        Yep! Carats know I love tigers.
        OMG, why are you texting me?!
            Because tigers like you are rare.
            What does that even mean?!
    I donâ€™t believe you.
        Want me to prove it?
        Yes, please!
            Letâ€™s hop on a call. ðŸ¯
            OMG, are you serious?!
    No thanks, faker.
        Ouch, but okay.`,
    "Felix (Stray Kids)": `Gâ€™day! ðŸ˜Š
Oh wow, Aussie vibes. Whoâ€™s this?
    Itâ€™s Felix from Stray Kids.
    Felix?! No way.
        Way.
        Prove it.
            Want me to send a selfie?
            OMG, yes!
        Wait, are you serious?
            Of course not, mate. But nice try.
    Haha, no way itâ€™s you.
        Fair enough, but youâ€™re missing out.`,
    "Hyunjin (Stray Kids)": `Are you behaving yourself?
Uhâ€¦ who is this?
    Hyunjin.
    Hyunjin... as in Stray Kids?
        Exactly.
        What do you mean by "behaving"?
            Donâ€™t play innocent.
            Okay, now Iâ€™m nervous.
    I donâ€™t believe you.
        Then keep misbehaving. See what happens.
        Wait, are you actually Hyunjin?
            What do you think?`,
    "Jungkook (BTS)": `Kneel.
Excuse me?!
    You heard me.
    Wait... is this Jungkook?
        Depends. Will you listen?
        OMG, why are you doing this?!
            Because you like it.
    Absolutely not.
        Haha, sure you wonâ€™t.
    What if I donâ€™t?
        Then Iâ€™ll make you.`,
    "Jennie (BLACKPINK)": `You forgot to say please.
For what?
    For everything.
    Wait, Jennie?!
        Took you long enough.
        Why are you so demanding?
            Because you love it.
    I donâ€™t think this is Jennie.
        Suit yourself. But youâ€™ll say please eventually.
        What makes you so sure?
            Hehe`,
    "San (ATEEZ)": `Are you ready to follow orders?
Excuse me?
    You heard me.
    San?!
        Thatâ€™s me.
        What kind of orders?
            The fun kind.
    Absolutely not.
        Haha, sure you wonâ€™t.
    What happens if I say no?
        Then I guess Iâ€™ll just have to convince you.`,
    "Kai (EXO)": `You look like someone who needs to be reminded whoâ€™s in charge.
Excuse me?!
    You heard me.
    Who is this?
        Itâ€™s Kai.
        Kai... from EXO?!
            Exactly.
            Why are you saying this to me?!
                Because you seem like you need it.
                What the hell does that mean?!
    Youâ€™re definitely not Kai.
        Oh, really? Care to test that theory?
        How would you even prove it?
            Simple. I could just call you and settle it.
            Wait, what?!`,
    "Taehyang (BIGBANG)": `Youâ€™re mine, arenâ€™t you?
What?!
    I said, youâ€™re mine.
    Taeyang?!
        Yes. From BIGBANG.
        No way, why are you texting me?!
            Because you like it when Iâ€™m in control.
    What do you mean?
        You like it when I take charge.
    I donâ€™t think so.
        Youâ€™ll change your mind.
    How would you prove that?
        Iâ€™ll make you want it.
    Youâ€™re not even Taeyang.
        Haha, sure. But youâ€™ll see.
        Nope.
            Letâ€™s see how long you hold out.`,
    "Changbin (Stray Kids)": `Youâ€™ve been a little too quiet.
What do you mean?
    I mean, I think you need to be punished.
    Punished?
        Yeah, for being quiet.
        Youâ€™re not Changbin!
            Oh, but I am.
            Prove it then.
                How about I send a voice note?
                Iâ€™m listening.
                    *Growl*
                    Wait... thatâ€™s him!
                        I told you.
                        But why are you texting me like this?
                            Because I can tell you like it.
                            No way.
                                Youâ€™ll say yes eventually.`,
    "Baekhyun (EXO)": `Youâ€™ve been thinking about me, havenâ€™t you?
What?
    Donâ€™t deny it. I can feel it.
    Waitâ€¦ is this Baekhyun?
        The one and only.
        No way, why are you texting me?
            Because I know youâ€™re curious.
            Curious about what?
                About me, obviously.
                Youâ€™re just saying that.
                    Donâ€™t act like Iâ€™m not on your mind.
                    I donâ€™t believe you.
                        Want me to prove it?
                        How?
                            Letâ€™s see if youâ€™re brave enough to keep talking to me.
                            Iâ€™m not scared.
                                Letâ€™s find out then.`
}
pers = Object.keys(storylines)[Math.floor(Math.random()*Object.keys(storylines).length)]
storyline = storylines[pers].replaceAll("\"", "*").replaceAll("\'", "*")
document.getElementById("name").innerText = pers

function choose(line) {
    allLines = storyline.split("\n")
    thislevel = storyline.split("\n").filter(x => !x.startsWith("    "))
    nexti = thislevel[thislevel.indexOf(line)+1]
    tokenized = allLines.splice(allLines.indexOf(line), nexti == undefined ? allLines.length : (allLines.indexOf(nexti) - allLines.indexOf(line)))
    document.getElementById("chatinner").innerHTML += `<div class="msg you"><div class="bubble">${line.replaceAll(".", "").toLowerCase()}</div></div>`
    try {
        document.getElementById("chatinner").innerHTML += `<div class="msg other"><div class="bubble">${tokenized[1].replaceAll(".", "").toLowerCase()}</div></div>`
        // console.log(opts.map(chatMapper).join(""))
        opts = tokenized.filter(x => x.startsWith("    ") && !x.startsWith("        ")).map(x => x.slice("    ".length)).splice(1)
        document.getElementById("ds").innerHTML = opts.length == 0 ? "<button onclick='window.location.reload()'>New Chat</button>" : opts.map(chatMapper).join("")
        console.log(opts.map(chatMapper).join(""))
    } catch (e) {        
        document.getElementById("chatinner").innerHTML += `<div class="msg other"><div class="bubble">${pers} left the chatroom.</div></div>`
        document.getElementById("ds").innerHTML = "<button onclick='window.location.reload()'>New Chat</button>"
    }
    
    document.getElementById("chatinner").scrollTop = document.getElementById("chatinner").scrollHeight

    storyline = tokenized.splice(1).map(x => x.slice("    ".length)).join("\n")
}

chatMapper = x => `<button onclick='choose("${x}")'>${x.replaceAll(".", "").toLowerCase()}</button>`
starter = storyline.split("\n").filter(x => !x.startsWith("    "))
document.getElementById("chatinner").innerHTML += `<div class="msg other"><div class="bubble">${starter[0].replaceAll(".", "").toLowerCase()}</div></div>`
document.getElementById("ds").innerHTML = starter.splice(1).map(chatMapper).join("")

// console.log(chatMapper("What do you mean by \"behaving\"?"))